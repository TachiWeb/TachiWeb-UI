<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="/bower_components/polymer/polymer.html">
<link rel="import" href="/bower_components/app-route/app-location.html">
<link rel="import" href="/bower_components/app-route/app-route.html">
<link rel="import" href="/bower_components/neon-animation/neon-animation.html">

<link rel="import" href="/src/behavior/eventhub-behavior.html">
<link rel="import" href="/src/view/activity-main.html">
<link rel="import" href="/src/view/activity-settings.html">

<dom-module id="tw-app">
    <template>
        <style>
            :host {
                --primary-color: #54759e;
                --secondary-color: black;

                display: block;
                height: 100vh;
            }

            paper-item {
              cursor: pointer;
            }
            
            neon-animated-pages {
                overflow: hidden;
                height: 100%;
            }
        </style>

        <app-location route="{{route}}" use-hash-as-path></app-location>
        <app-route route="{{route}}" pattern="/:page" data="{{routeData}}" tail="{{subroute}}"></app-route>
        
        <neon-animated-pages selected="[[selectedActivity]]" class="flex fit">
            <activity-main route-data="{{routeData}}"></activity-main>
            <activity-settings></activity-settings>
        </neon-animated-pages>
    </template>

    <script>
        Polymer({
            is: 'tw-app',
            behaviors: [EventHubBehavior],
            properties: {
                selectedActivity: {
                    value: 0
                }
            },
            attached: function() {
                this.ehConn.on("ActivitySwitchRequest", function(newActivity) {
                    this.selectedActivity = {
                        "Main": 0,
                        "Settings": 1
                    }[newActivity];
                }.bind(this));
            }
        });
    </script>
</dom-module>
